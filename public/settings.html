<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings</title>
</head>
<link rel="stylesheet" href="stylesheets/w3.css">
<link rel="stylesheet" href="stylesheets/settings.css ">
<body onload="onload()">
<script src="jquery-3.4.1.min.js"></script>
<div id="input_block">
    From: <INPUT TYPE="NUMBER" MIN="1500" MAX="2019" STEP="1" VALUE="1800" SIZE="6" id="input1">
    <br>
    <br>
    To: <INPUT TYPE="NUMBER" MIN="1500" MAX="2019" STEP="1" VALUE="1900" SIZE="6" id="input2">
</div>

<button class="w3-button w3-teal w3-round-large" type="button" id="button_back" onclick="location.href='index.html'">Back</button>
<button class="w3-button w3-teal w3-round-large" type="button" id="button_apply" onclick="apply()">Apply</button>

<button class="w3-button w3-teal w3-round-large" type="button" id="button_export" onclick="mongoexport()" >Export</button>
<button class="w3-button w3-teal w3-round-large" type="button" id="button_import" onclick="mongoimport()">Import</button>
<button class="w3-button w3-teal w3-round-large" type="button" id="button_drop" onclick="mongodrop()">Drop DB</button>
<script>

    function onload() {
        var _filter = localStorage.foo ? JSON.parse(localStorage.foo) : [1500, 2019];
        $("#input1").val(_filter[0])
        $("#input2").val(_filter[1])

    }

</script>



<script>
    function apply() {
        if($("#input1").val() > $("#input2").val() || $("#input1").val()<0 || $("#input2").val()<0 ){
            alert("Incorrect input")
        } else {
            alert("Settings have been saved")
            foo = [$("#input1").val(), $("#input2").val()]
            localStorage.foo = JSON.stringify(foo)
        }
    }

</script>

<script>
    function mongoexport(){
        $.get("http://localhost:3001/", {name:"Export"},
            alert("Export Finished")
        )

    }
    function mongoimport(){
        $.get("http://localhost:3001/", {name:"Import"},
            alert("Import Finished")
        )
    }

    function mongodrop() {
        $.get("http://localhost:3001/", {name:"Drop"},
            alert("Drop Finished")
        )
    }
</script>
</body>
</html>